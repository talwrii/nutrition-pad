#!/bin/bash
# Local dev server on port 9876
# Usage: ./dev-server        - (re)start server
#        ./dev-server stop   - stop server
set -e
PORT=9876

if [ "$1" = "stop" ]; then
    lsof -ti:$PORT | xargs kill -9 2>/dev/null && echo "Stopped" || echo "Not running"
    exit 0
fi

lsof -ti:$PORT | xargs kill -9 2>/dev/null || true
sleep 0.5
nutrition-pad --port $PORT > /tmp/nutrition-pad-server.log 2>&1 &
echo "Dev server started on http://localhost:$PORT (PID $!)"
